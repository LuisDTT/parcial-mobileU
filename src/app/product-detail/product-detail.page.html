<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ product?.title || 'Producto' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/cart">
        <ion-icon name="cart" slot="icon-only"></ion-icon>
        <ion-badge color="danger">{{ cartItemCount }}</ion-badge>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="loading" class="loading">
    <ion-spinner name="crescent"></ion-spinner>
  </div>

  <div *ngIf="!loading && product" class="product-detail">
    <ion-img [src]="product.image" class="product-image"></ion-img>
    
    <ion-list lines="none">
      <ion-item>
        <ion-label class="price-label">
          <h1>${{ product.price | number:'1.2-2' }}</h1>
          <p class="category">{{ product.category }}</p>
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-label class="description">
          {{ product.description }}
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-icon name="star" slot="start" color="warning"></ion-icon>
        <ion-label>
          {{ product.rating?.rate }} ({{ product.rating?.count }} productos vendidos)
        </ion-label>
      </ion-item>
    </ion-list>

    <ion-button expand="block" class="add-to-cart" (click)="addToCart()">
      <ion-icon slot="start" name="cart"></ion-icon>
      AÃ±adir al carrito
    </ion-button>
  </div>
</ion-content>